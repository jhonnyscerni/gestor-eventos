<div main-content layout="row" layout-align="center start">

  <mat-card flex-gt-xs="70" flex="100" tdMediaToggle="gt-xs" [mediaClasses]="['push']" *ngIf="evento">

    <mat-card-title>Informações Gerais </mat-card-title>
    <mat-divider></mat-divider>
    <mat-card-content>
      <!-- FORMULÁRIO -->
      <form #vform="ngForm" autocomplete="off" (ngSubmit)="onSubmit()">

        <!-- FORMULÁRIO -->
        <div layout="column">
          <!-- NOME -->
          <mat-input-container floatPlaceholder="auto" flex="100">
            <input matInput #nome="ngModel" minlength="5" maxlength="250" [(ngModel)]="evento.nome" name="nome" type="text" placeholder="Nome do Evento"
              required>
            <mat-error [hidden]="nome.valid || (nome.pristine && !vform.submitted)">
              O nome do Evento é um campo obrigatório de 5 até 250 caracteres.
            </mat-error>
          </mat-input-container>

          <!-- SIGLA -->
          <mat-input-container floatPlaceholder="auto" flex="50">
            <input matInput #sigla="ngModel" [(ngModel)]="evento.sigla" name="sigla" type="text" placeholder="Sigla Exclusíva do Evento"
              minlength="5" maxlength="50" required pattern="^[a-zA-Z0–9_.+-]+$">
            <mat-error [hidden]="sigla.valid || (sigla.pristine && !vform.submitted)">
              A sigla do Evento é um campo obrigatório e exclusivo, de 5 até 50 caracteres e não pode conter espaços.
            </mat-error>
          </mat-input-container>

          <!-- EMAIL -->
          <mat-input-container floatPlaceholder="auto" flex="50">
            <input matInput #email="ngModel" [(ngModel)]="evento.email" name="email" type="email" placeholder="Email do Evento" required
              pattern='\S+@\S+\.\S+'>
            <mat-hint [hidden]="!email.valid">Este será o endereço de email oficial do {{evento.nome}} Pode ser um endereço exclusivo ou o email da unidade gestora
              do {{evento.nome}}.
            </mat-hint>
            <mat-error [hidden]="email.valid || (email.pristine && !vform.submitted)">
              Digite um endereço de email válido.
            </mat-error>
          </mat-input-container>

          <!-- DESCRIÇÃO -->
          <mat-input-container floatPlaceholder="auto" flex="100">
            <textarea matInput #descricao="ngModel" placeholder="Descrição" name="descricao" [(ngModel)]="evento.descricao" matTextareaAutosize
              matAutosizeMinRows="1" matAutosizeMaxRows="5" required></textarea>
            <mat-hint [hidden]="!descricao.valid">A descrição do Evento aparecerá na página do Evento no Portal de Eventos e no email de aviso dos que assinaram
              o Push.</mat-hint>
            <mat-error [hidden]="descricao.valid || (descricao.pristine && !vform.submitted)">
              Digite ao menos uma linha para a descrição.
            </mat-error>
          </mat-input-container>

          <!-- TIPO DE EVENTO -->
          <mat-form-field>
            <mat-select placeholder="Tipo de Evento" name="tipoEvento" [(ngModel)]="evento.tipoDeEvento" required>
              <mat-option *ngFor="let tipoEvento of tipoEventos" [value]="tipoEvento">
                {{ tipoEvento.nomeSingular }}
              </mat-option>
            </mat-select>
          </mat-form-field>


          <!-- TIPO DE EVENTO
          <mat-form-field>
            <mat-select placeholder="Tipo de Evento" name="tipoEvento" [(ngModel)]="evento.tipoDeEvento.id">
              <mat-option *ngFor="let tipoEvento of eventTypes.getList()" [value]="tipoEvento.id">
                {{ tipoEvento.nomeSingular }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <br/> -->


          <!-- QUANTIDADE DE ATIVIDADES -->
          <mat-input-container floatPlaceholder="auto" flex="20">
            <input matInput #qtdAtividade="ngModel" [(ngModel)]="evento.qtdAtividade" name="qtdAtividade" type="number"
              placeholder="Quantidade de Atividades" required min="1" max="99999" pattern="^[1-9][0-9]*$">
            <mat-hint [hidden]="!qtdAtividade.valid">A quantidade de atividades do Evento define a contagem de frequência dos seus participantes.</mat-hint>
            <mat-error [hidden]="qtdAtividade.valid || (qtdAtividade.pristine && !vform.submitted)">
              O mínimo necessário de atividades é 1 (uma atividade).
            </mat-error>
          </mat-input-container>
          <br/>

          <!-- CARGA HORARIA -->
          <mat-input-container floatPlaceholder="auto" flex="20">
            <input matInput #cargaHoraria="ngModel" [(ngModel)]="evento.cargaHoraria" name="cargaHoraria" type="number" placeholder="Carga Horária Total do Evento"
              required min="1" max="99999" pattern="^[1-9][0-9]*$">
            <mat-hint [hidden]="!cargaHoraria.valid">Define a carga horária total do event.get().</mat-hint>
            <mat-error [hidden]="cargaHoraria.valid || (cargaHoraria.pristine && !vform.submitted)">
              O mínimo necessário de horas é 1 (uma hora).
            </mat-error>
          </mat-input-container>
          <br/>



          <!-- Data Inicial -->
          <mat-input-container floatPlaceholder="auto" flex="50">
            <label>
              Data e Hora do Início do Período de Inscrições:
              <br/>
              <br/>
              <input matInput #inicioInscricao="ngModel" [owlDateTimeTrigger]="dt1" [owlDateTime]="dt1" [(ngModel)]="evento.inicioInscricao"
                name="inicioInscricao" required>
              <owl-date-time [pickerMode]="'dialog'" #dt1></owl-date-time>
            </label>
          </mat-input-container>
          <mat-hint *ngIf="!isSubscriptionStartConflicsWithSubscriptionEnd() && !isSubscriptionStartConflicsWithEventStart()">
            Esta será a data/hora em que os interessados poderão começar a se inscrever no site.
          </mat-hint>
          <mat-error *ngIf="isSubscriptionStartConflicsWithSubscriptionEnd()">
            A data/hora de início das inscrições não pode ser posterior à data/hora de término das inscrições.
          </mat-error>
          <mat-error *ngIf="isSubscriptionStartConflicsWithEventStart()">
            A data/hora de início das inscrições não pode ser posterior à data/hora de início do Evento.
          </mat-error>


          <!-- Data Fim -->
          <mat-input-container floatPlaceholder="auto" flex="50">
            <label>
              Data e Hora do Fim do Período de Inscrições:
              <br/>
              <br/>
              <input matInput #fimInscricao="ngModel" [owlDateTimeTrigger]="dt2" [owlDateTime]="dt2" [(ngModel)]="evento.fimInscricao"
                name="fimInscricao" required>
              <owl-date-time [pickerMode]="'dialog'" #dt2></owl-date-time>
            </label>
          </mat-input-container>
          <mat-hint *ngIf="!isSubscriptionStartConflicsWithSubscriptionEnd() && !isSubscriptionEndConflicsWithEventEnd()">
            Esta será a data/hora em que as inscrições no Evento se encerrarão ao público, podendo haver inscrições somente pelo Gestor.
          </mat-hint>
          <mat-error *ngIf="isSubscriptionStartConflicsWithSubscriptionEnd()">
            A data/hora de término das inscrições não pode ser anterior à data/hora de início das inscrições.
          </mat-error>
          <mat-error *ngIf="isSubscriptionEndConflicsWithEventEnd()">
            A data/hora de término das inscrições não pode ser posterior à data/hora de término do Evento.
          </mat-error>


          <!-- Data Inicial -->
          <mat-input-container floatPlaceholder="auto" flex="50">
            <label>
              Data e Hora do Início do Evento:
              <br/>
              <br/>
              <input matInput #inicioEvento="ngModel" [owlDateTimeTrigger]="dt3" [owlDateTime]="dt3" [(ngModel)]="evento.inicioEvento"
                name="inicioEvento" required>
              <owl-date-time [pickerMode]="'dialog'" #dt3></owl-date-time>
            </label>
          </mat-input-container>
          <mat-hint *ngIf="!isEventStartConflicsWithEventEnd() && !isSubscriptionStartConflicsWithEventStart()">
            Esta será a data/hora em que o Evento começa oficialmente.
          </mat-hint>
          <mat-error *ngIf="isEventStartConflicsWithEventEnd()">
            A data/hora de início do Evento não pode ser posterior à data/hora de término do Evento.
          </mat-error>
          <mat-error *ngIf="isSubscriptionStartConflicsWithEventStart()">
            A data/hora de início do Evento não pode ser anterior à data/hora de início das inscrições.
          </mat-error>



          <!-- Data Fim -->
          <mat-input-container floatPlaceholder="auto" flex="50">
            <label>
              Data e Hora do Fim do Evento:
              <br/>
              <br/>
              <input matInput #fimEvento="ngModel" [owlDateTimeTrigger]="dt4" [owlDateTime]="dt4" [(ngModel)]="evento.fimEvento" name="fimEvento"
                required>
              <owl-date-time [pickerMode]="'dialog'" #dt4></owl-date-time>
            </label>
          </mat-input-container>
          <mat-hint *ngIf="!isEventStartConflicsWithEventEnd() && !isSubscriptionEndConflicsWithEventEnd()">
            Esta será a data/hora em que o Evento termina oficialmente (carga horária completada).
          </mat-hint>
          <mat-error *ngIf="isEventStartConflicsWithEventEnd()">
            A data/hora de término do Evento não pode ser anterior à data/hora de início do Evento.
          </mat-error>
          <mat-error *ngIf="isSubscriptionEndConflicsWithEventEnd()">
            A data/hora de término do Evento não pode ser anterior à data/hora de término das inscrições.
          </mat-error>


        </div>

        <div layout="column">
          <mat-card-actions>
            <button mat-button mat-raised-button [disabled]="!vform.form.valid" color="primary" type="submit">SALVAR</button>
            <button mat-raised-button (click)="voltar()">CANCELAR</button>
            <!-- <button mat-button color="warn" (click)="voltar()">CANCELAR</button> -->
          </mat-card-actions>
        </div>




      </form>
    </mat-card-content>
    <mat-card-footer>
    </mat-card-footer>
  </mat-card>
</div>